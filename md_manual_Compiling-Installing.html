<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>VeloxDFS: Compiling-Installing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="text-align:center">
  <img alt="Logo" style="text-align:center" src="velox_logo.png"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Compiling-Installing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>COMPILING &amp; INSTALLING </h1>
<h2>Dependencies</h2>
<ul>
<li>autoconf, automake and libtool up to dated to a recent version.</li>
<li>C++ Boost library (&gt;= 1.56), check [Boost download site] [boost].</li>
<li>GNUcompiler (&gt;= 4.4)</li>
<li>Ruby interpreter (&gt;= 2.2.0), check [Ruby version Manager] [rvm].</li>
</ul>
<h2>How to compile the project</h2>
<p>You will want to have an independent different folder for Autotools to place all the temporary files (objects files) so that the repository folder does not get full of useless files (Making hard using git). </p>
<pre class="fragment">$ mkdir -p local_eclipse/{tmp,sandbox}                 # Create a sandbox directories
$ cd local_eclipse                                     # enter in the directory
$ git clone git@github.com:DICL/VeloxDFS.git           # Clone the project from github
$ sh autogen.sh                                        # Generate configure script 
$ cd ../tmp                                            # Go to building folder
$ sh ../VeloxDFS/configure --prefix=`pwd`/../sandbox   # Generate Makefile

In case that boost library is in a non standard place

$ sh ../VeloxDFS/configure --prefix=`pwd`/../sandbox --with-boost=/pathtoboostheaders  # Generate Makefile

Lastly,

### This last command will be needed whenever you want to recompile the source
$ make [-j#] install                                   # Compile &amp; install add -j flag to speed up
</pre><p>Now edit in your <code>~/.bashrc</code> or <code>~/.profile</code>: </p>
<pre class="fragment">export PATH="/home/*..PATH/To/eclipse/..*/sandbox/bin":$PATH
export LIBRARY_PATH="/home/*..PATH/To/eclipse/..*/sandbox/lib"
export C_INCLUDE_PATH="/home/*..PATH/To/eclipse/..*/sandbox/include"
</pre><h2>Configure custom flags</h2>
<p>Our configure script supports the following flags:</p>
<ul>
<li><code>--with-boost=PATH</code>, location of boost library, if boost is in <code>/usr/local/lib</code> it will be in <code>/usr/local</code>.</li>
<li><code>--disable-samples</code>, does not copy reference <code>.eclipse.json</code>.</li>
<li><code>--enable-lblocks</code>, enable support for logical blocks.</li>
<li><code>CXX</code> <code>CXXFLAGS</code>, add custom compiler/compiler flags.</li>
</ul>
<h1>GNU/Autotools 101</h1>
<h2>What's the deal with Autotools and why are we using it</h2>
<p>When it comes to C++ we do not have much of a choice for Building Systems. How can we make our Project compatible with other computers (Lets think only within Linux). <em>VeloxDFS</em> depends on <code>Boost ASIO</code>, <code>UnitTest++</code>, and <code>C++14</code>.</p>
<blockquote class="doxtable">
<p>How can you check that the computer you are installing it contains those libraries? Or, if the libraries are in a different location how can you find them?.</p>
<p></p>
</blockquote>
<p>Regular <code>Makefiles</code> are not enough since while it let you do some complex things, you will endup with a giant Makefile that would be harder to maintain the the source code itself.</p>
<p><code>GNU/Autotools</code> creates this crazy big and complex <code>Makefile</code> for you, only calling the following standard commands that all the Linux community is familiar with: </p>
<pre class="fragment">$ ./configure "many options here"  # Generate Makefile
$ ./make
$ sudo make install
</pre><p>It will compile and install the software in your computer. It will also deal with many differences between plataforms.</p>
<blockquote class="doxtable">
<p>Learning GNU/Autotools is hard and boring, but if you will use Linux for some years, it worth learn it.</p>
<p></p>
</blockquote>
<h2>How is VeloxDFS using Autotools</h2>
<p><em>VeloxDFS</em> is using <em>Autotools</em> by the files <code>configure.ac</code>, <code>Makefile.am</code>, and lesser important <code>autogen.sh</code>.</p>
<ul>
<li><em>configure.ac</em> is where we set important variables for our project like <em>should we include this code? Should I install the system in this location...</em>. It is a template for the final <code>configure</code> script.</li>
<li><em>Makefile.am</em> is a template for the final Makefile (Huge and complex). Normally this <code>Makefile.am</code> is rather small and simple compared to the output Makefile.</li>
<li><em>autogen.sh</em> generates the <code>configure</code> script from <code>configure.ac</code></li>
</ul>
<p>Here is a diagram which explain the workflow of creating the Makefile: </p>
<pre class="fragment">  +-------------+               +-------------+
  | configure.ac+---------------&gt; configure   +-----+
  +-------------+  ./autogen.sh +-------------+     |
                                                    |      +-------------+
                                                    +-----&gt;+ Makefile    |
                                                    |      +-------------+
                                +-------------+     |
                                | Makefile.am +-----+
                                +-------------+</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 17 2017 17:29:14 for VeloxDFS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
