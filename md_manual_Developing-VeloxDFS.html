<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>VeloxDFS: Developing-VeloxDFS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="text-align:center">
  <img alt="Logo" style="text-align:center" src="velox_logo.png"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Developing-VeloxDFS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Developing VeloxDFS</h1>
<h2>Create your feature</h2>
<blockquote class="doxtable">
<p><em>IMPORTANT</em> One feature for branch, if you add more features merge part might become very complicated.</p>
<p></p>
</blockquote>
<ol type="1">
<li>Create a branch from the latest commit of master: <pre class="fragment">$ git checkout master                # Move to master branch
$ git pull master                    # Update to latest commit
$ git checkout -b my-feature-branch  # Create branch from that commit
</pre></li>
<li>Add your feature and as much unit tests as possible.<ul>
<li>Add your unit test to the Autotools <code>make check</code> rule - Check <em>test/Makefile.am</em> file.</li>
<li>It is imperative not to touch code that is not related to your feature.</li>
</ul>
</li>
</ol>
<blockquote class="doxtable">
<p><em>IMPORTANT</em> One branch/feature per person is the best approach. Do not call your branch with the persons names but with the feature name (Check coding style page).</p>
<p></p>
</blockquote>
<ol type="1">
<li>By the time that your branch (feature) is getting ready it time to open a pull request (PR) in Github. As soon as the open request is opened the team will be notified and a automated deployment of your code will be trigger in a <em>Travis Ci</em> virtual machine (Further info at Continuous Integration part).</li>
<li><p class="startli">If the virtual machine worked without problem is time to group together your mess of commits and create as few as possible with very meaningful messages, <a href="https://github.com/agis/git-style-guide#branches">Commit message standars</a>.</p>
<p class="startli">You will want to use <code>git rebase -i</code> probably. I encourage you to instruct yourself about this command as it can be dangerous to use. </p>
<pre class="fragment">$  git rebase -i #commit of beginning of branch
</pre><p class="startli">Also, do not forget to comment your code in the Doxygen manner, and to update the documentation of the project if you have added something that needs to be known to other developers or users.</p>
</li>
<li>Once your code is tested in your local machine and the VM and your commits are well organized is time to get an approval from some of the team mates through a code review. You can request it in the Github Pullrequest form. The other team mate will check your code and comment parts that might need to be fixed or modify. Iterate through step 4 and 5 until you get the approval.</li>
<li>You get the approval, you are ready to merge. Use <code>merge commit</code> strategy to keep an linear story while maintaining some of the individual commits so that your work contribution will be totally counted. In the commit message that you can modifiy in the PR form add <code>release: X.Y.Z</code> according to the version you will release, <a href="http://semver.org/">versioning schema</a>.</li>
<li>The VM will generate the documentation site (Doxygen) automatically and generate a tag and tarball with the version you specified in the commit message (If you forgot to specifiy the release version, just do it manually <code>git tag -avX.Y.Z -m ".."</code>).</li>
</ol>
<h2>How to update VeloxMR from VeloxDFS (Fork Model explained)</h2>
<ol type="1">
<li><p class="startli">To keep things simple it would be recommendable to Update from a tag in VeloxDFS. This is, VeloxMR is always dependent to some version (Master commit) of VeloxDFS. So If VeloxMR was dependent on v1.8.1 and you want update it, it will later depend in the other version like 1.8.5 for instance.</p>
<p class="startli">In VeloxMR folder routhly follow the following commands: </p>
<pre class="fragment"> $ git remote add MR git@github.com:DICL/VeloxMR.git  # Fetch VeloxMR remote
 $ git fetch MR                                     
 $ git checkout mapreduce
 $ git checkout -b update-vX.Y.Z                      # Create branch from DFS tag
 $ git merge --squash --no-commit vX.Y.Z              # Merge, you might want to use -Xours or -Xtheirs
</pre><p class="startli">Now it is the hard part, you will have merge conflicts for each files that are repeated. Make sure just to merge source code related to DFS you should ignore other merge conflict files such as <code>configure.ac</code> file or <code><a class="el" href="README_8md.html">README.md</a></code> file. THose files you want to keep the current MR version, you do not want to copy them from DFS. You can disable merge on those files with the following command: </p>
<pre class="fragment"> $ git checkout --ours FILE1 FILE2 FILE...
</pre><p class="startli">On the other hand if you want to get ride of MR Files and just copy DFS execute: </p>
<pre class="fragment"> $ git checkout --theirs FILE1 FILE2 FILE...
</pre><p class="startli">Be very sure that you only merged or include files related to DFS. Check time to time with <code>git status</code>.</p>
</li>
<li><p class="startli">Once ready execute command: </p>
<pre class="fragment"> $ git commit
</pre><p class="startli">Write a meaninful message and then you can follow PR workflow described in the first section.</p>
</li>
</ol>
<h2>How to update VeloxDFS from VeloxMR (Fork Model explained)</h2>
<p>This part is much harder and relies on more obscure git features. The idea is to create a manual patch file with the exact changes.</p>
<ol type="1">
<li>Create a commit which only includes the DFS related files in the VeloxMR folder. You can check many manuals online how to do it.</li>
<li>Create patch file with: <pre class="fragment">  $ git format-patch -1 &lt;commit sha&gt;
</pre></li>
<li>Apply in DFS in a branch called <code>add-mr-updates</code> or something like that with the command: <pre class="fragment">  $ git apply --stat file.patch   # See patch stats
  $ git apply --check file.patch  # Check patch 
  $ git am &lt; file.patch           # Apply patch
</pre> </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 17 2017 17:29:14 for VeloxDFS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
